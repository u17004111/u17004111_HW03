@model IEnumerable<_272_hw03_final_rev2.Models.FileModel>

<h2>Images</h2>
<h5>Uploaded images are displayed here.</h5>
<p>The directory is <a href="@Server.MapPath("~/Media/Images/")">@Server.MapPath("~/Media/Images/")</a></p>

<div class="row row-cols-1 row-cols-md-4">
    @{
        if (Model != null)
        {
            foreach (var image in Model)
            {
                var imagePath = "~/Media/Images/" + image.FileName;
                var absolutePath = new Uri(Request.Url, Url.Content(imagePath));

                <div class="col mb-4">
                    <div class="card h-100">
                        <div class="fancybox">
                            <a href="@Url.Content(imagePath)">
                                <img class="card-img-top" src="@Url.Content(imagePath)" />
                            </a>
                        </div>

                        <div class="card-body h-100">
                            <p class="card-text"><small class="text-muted">@image.FileName</small></p>
                        </div>
                        <div class="card-footer">
                            <span>
                                @Html.ActionLink("Download", "Download", "Image", new { fileName = image.FileName }, new { @class = "btn btn-primary" })
                                @Html.ActionLink("Delete", "Delete", "Image", new { fileName = image.FileName }, new { @class = "btn btn-secondary" })
                            </span>
                        </div>
                    </div>
                </div>
            }
        }
    }
</div>

<script type="text/javascript">
    $(document).ready(function () {
        $(".fancybox a").fancybox({
            fitToView: true,
        });
    });

</script>
